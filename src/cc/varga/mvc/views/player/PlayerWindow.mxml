<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
				xmlns:s="library://ns.adobe.com/flex/spark" 
				xmlns:mx="library://ns.adobe.com/flex/halo"
				xmlns:controllers="cc.varga.mvc.views.controllers.*"
				
				width="458" height="100%"
				
				creationComplete="group1_creationCompleteHandler(event)">
	
	<s:layout><s:VerticalLayout/></s:layout>
	
	<fx:Script>
		<![CDATA[
			import cc.varga.mvc.events.player.PlayerEvent;
			import cc.varga.mvc.events.playlist.PlaylistURLEvent;
			import cc.varga.utils.logging.*;
			
			import mx.events.FlexEvent;
			
			private var youtubPlayerLoader : Loader = new Loader();

			protected function lockBtn_clickHandler(event:MouseEvent):void
			{
				dispatchEvent(new PlayerEvent(PlayerEvent.LOCK));				
			}

			protected function unlockBtn_clickHandler(event:MouseEvent):void
			{
				dispatchEvent(new PlayerEvent(PlayerEvent.UNLOCK));				
			}

			protected function loadpl_clickHandler(event:MouseEvent):void
			{
				dispatchEvent(new PlaylistURLEvent(PlaylistURLEvent.PLAYLIST_LOAD));
			}


			protected function savepl_clickHandler(event:MouseEvent):void
			{
				dispatchEvent(new PlayerEvent(PlayerEvent.SAVE_PLAYLIST));				
			}


			protected function loadBlipFeed_clickHandler(event:MouseEvent):void
			{
				dispatchEvent(new PlayerEvent(PlayerEvent.LOAD_BLIP_FM_FEED));	
			}


			protected function group1_creationCompleteHandler(event:FlexEvent):void
			{
				youtubPlayerLoader = new Loader();
				this.youtubPlayerLoader.addEventListener(Event.ACTIVATE, onContentInit);
				this.youtubPlayerLoader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
				this.youtubPlayerLoader.addEventListener(Event.COMPLETE, onComplete);
				this.youtubPlayerLoader.load(new URLRequest("http://www.youtube.com/apiplayer?version=3"));
				
			}
			
			private function onComplete(event : Event):void{
				Logger.tracing("onComplete youtubePlayerLoader", "PlayerWindow");
				youtubePlayerContainer.addChild(youtubPlayerLoader.loaderInfo.loader);
			}
			
			private function onIOError(event : IOErrorEvent):void{
				Logger.tracing("onIOError youtubePlayerLoader", "PlayerWindow");
			}
			
			private function onContentInit(event : Event):void{
				Logger.tracing("Init content", "PlayerWindow");
				
				youtubePlayerContainer.addChild(youtubePlayerContainer.loaderInfo.loader);
			
			}

		]]>
	</fx:Script>
	
	<mx:Canvas id="youtubePlayerContainer" width="100%" height="300" />
	
	<controllers:Controllers id="controllers" width="100%" height="55" />
	
	<mx:DataGrid id="dataGrid" width="100%" height="100%" fontSize="14">
		<mx:columns>
			<mx:DataGridColumn dataField="title" headerText="Title"/>
		</mx:columns>
	</mx:DataGrid>
	
	<s:Group>
		<s:layout><s:HorizontalLayout/></s:layout>
		<s:Button id="lockBtn" label="Lock Player" click="lockBtn_clickHandler(event)" width="100%"/>
		<s:Button id="unlockBtn" label="UnLock Player" click="unlockBtn_clickHandler(event)" width="100%"/>	
		<s:Button id="savepl" label="Save Playlist" click="savepl_clickHandler(event)" width="100%"/>
		<s:Button id="loadpl" label="Load Playlist" click="loadpl_clickHandler(event)" width="100%"/>
		<s:Button id="loadBlipFeed" label="Load Blip.fm Feed" click="loadBlipFeed_clickHandler(event)" width="100%"/>
	</s:Group>
	
</s:Group>
